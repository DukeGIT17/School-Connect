@model IEnumerable<Parent>
@{
    Layout = null;
}
<link rel="stylesheet" href="~/FontAwesome/css/all.min.css" />
<link rel="stylesheet" href="~/css/TeacherCSS/TeacherChatList.css" />


<body>
    <div class="container">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="sidebar-header">
                Chats
            </div>
            <div class="sidebar-search">
                <input type="text" id="search-input" placeholder="Search contacts...">
                <i class="fas fa-search search-icon"></i>
            </div>
            <div class="contacts" id="contacts-list">
                @foreach (var parent in Model)
                {
                    <div class="contact" onclick="openChat(@parent.Id)">
                        <img src="@parent.ProfileImageBase64" alt="@parent.Name @parent.Surname">
                        <div class="name">@parent.Title @parent.Name @parent.Surname</div>
                    </div>
                }
            </div>
        </div>

        @foreach (var parent in Model)
        {
            <div id="@parent.Id" class="chat-section" style="display: none;">
                <div class="chat-header">
                    <img class="profile-img" src="@parent.ProfileImageBase64" alt="Profile">
                    <div class="profile-name">Chat with @parent.Title @parent.Name @parent.Surname</div>
                </div>
                <div class="subject-container">
                    <div class="subject-button" onclick="toggleOptions()">
                        <span>Subject: Enquire</span>
                        <div class="dots">•••</div>
                    </div>
                    <div class="options-menu" style="display: none;">
                        <div class="option" onclick="selectSubject('Enquire')">Enquire</div>
                        <div class="option" onclick="selectSubject('Complaint')">Complaint</div>
                        <div class="option" onclick="selectSubject('Report')">Report</div>
                    </div>
                </div>


                <div class="chat-messages">
                    <!-- Message bubbles will be inserted here dynamically -->
                </div>
                <div class="chat-input">
                    <input type="text" placeholder="Type a message">
                    <button class="send-btn"><i class="fas fa-paper-plane"></i></button>
                </div>
            </div>
        }        

        <!-- Placeholder when no chat is selected -->
        <div class="no-chat" id="no-chat">
            <h2>Welcome to Teacher-Parent Chat</h2>
            <p>Select a contact to start a conversation</p>
            <p>created by SomethingTechy.</p>
        </div>
    </div>

   <script src="~/js/Teacher/TeacherChatList.js"></script>
</body>